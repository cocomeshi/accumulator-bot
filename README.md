## Accumulator bot

飯屋情報を集取し、DBに蓄積するバッチ

## メモ

[Google Plcaes API](https://developers.google.com/places/web-service/search) を使用する。

### 緯度のメートル換算

0.00027778度 = 31m
なので、3kmの範囲検索をAPIでやっていくとすれば、  
0.027778(半径) × 2 = 0.055556ずつずらして走査していく。

### 経度のメートル換算
経度は緯度によって変化する（緯度が変わると、円周が変わる）ので、緯度ごとに
計算していく必要があるけど、無視しても良さそうな気もする。
東京から鹿児島の落差で4kmほどしか変わらないので...↓

北海道（緯度44度）　約 80km  
東京（緯度35度）　約 91km  
鹿児島（緯度31度）　約 95km  

経度についても一旦固定値で距離を算出する。  
東京（緯度35度）で、  
一秒 = 25m  
なので  
0.0333336度 = 3km  
半径3kmで走査していくならば、  
0.0333336（半径）× 2 = 0.0666672ずつずらして走査


### データ収集方法

- API制限的に日本全土は厳しい
- 主要都市のスポットで半径何キロかで走査していく
- どのスポットを走査対象とするかのデータをまず作らないといけない（あるポイント(経度, 緯度)から何キロ圏内で列挙していく）


[参考：緯度経度1度の距離](http://mononofu.hatenablog.com/entry/20090324/1237894846)

[Goで一定周期で何かを行う](https://qiita.com/ruiu/items/1ea0c72088ad8f2b841e)


### Cloud Funtionsへのデプロイ
$ ./deploy-functions.sh